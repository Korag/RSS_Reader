
@{
    ViewBag.Title = "Index";
}
@section scripts
    {
        <script>
          Vue.component('searchbar', {
            template: '<div><input><button>Szukaj</button></div>'
          })
          Vue.component('emailbar', {
            template: '<div><input><button>Subskrybuj</button></div>'
          })
          Vue.component('contentlist', {
            props: ['item'],
              template: '<div class="row border border-primary"><div class="col">{{item.Title}}</div><div class="col">{{item.Category}}</div><div class="row"><span v-html="item.Description"></span></div></div>',
              
          })
          Vue.component('categorylist', {
            props: ['category'],
              template: '<div class="row border border-success"><div>{{category}}</div><input type="checkbox"></div>'
          })

            var app = new Vue({
                el: '#app',
                data: {
                    apiResponse: [],
                    newsList: [],
                    categoryList: []
                },
                methods: {
                    GetNews: function () {
                        this.$http.get('http://localhost:59554/api/RssDocument')
                            .then(response => {
                                this.apiResponse = response.data;
                                this.GetListOfNews(this.apiResponse);
                                this.GetListOfCatergory(this.apiResponse);
                            });
                    },
                    GetListOfNews: function (apiResponse) {
                        for (let i = 0; i < apiResponse.length; i++) {
                            for (let j = 0; j < apiResponse[i].RssDocumentContent.length; j++) {
                                this.newsList.push(apiResponse[i].RssDocumentContent[j])
                            }
                        }
                    },
                    GetListOfCatergory: function (apiResponse) {
                        for (let i = 0; i < apiResponse.length; i++) {
                            this.categoryList.push(apiResponse[i].Title);
                        }
                    }
                },
                created: function () {
                    this.GetNews();
                },
            })
        </script>
    }


    <div id="app" class="container-fluid">
      <div class="row">
        <div class="col-2">
            <categorylist
            v-for="category in categoryList"
            v-bind:key="category.Name"
            v-bind:category="category"></categorylist>
        </div>
        <div class="col-10">
            <searchbar class="col"></searchbar>
            <contentlist  class="col"
            v-for="obj in newsList"
            v-bind:item="obj"
            v-bind:key="obj.$id"
            ></contentlist>
            <emailbar class="col"></emailbar>
        </div>
      </div>
    </div>
