
@{
    ViewBag.Title = "Index";
}
@section scripts
    {
    <script>
          Vue.component('searchbar', {
          })
          Vue.component('emailbar', {
          })
          Vue.component('contentlist', {
            props: ['item'],
              template: '<div class="row border border-primary"><div class="col">{{item.Title}}</div><div class="col">{{item.Category}}</div><div class="row"><span v-html="item.Description"></span></div></div>',

          })
          Vue.component('categorylist', {
            props: ['category'],
              template: '<div class="row border border-success"><div>{{category}}</div><input type="checkbox"></div>'
          })

            var app = new Vue({
                el: '#app',
                data: {
                    apiResponse: [],
                    newsList: [],
                    categoryList: []
                },
                methods: {
                    GetNews: function () {
                        this.$http.get('http://localhost:59554/api/RssDocument')
                            .then(response => {
                                this.apiResponse = response.data;
                                this.GetListOfNews(this.apiResponse);
                                this.GetListOfCatergory(this.apiResponse);
                            });
                    },
                    GetListOfNews: function (apiResponse) {
                        for (let i = 0; i < apiResponse.length; i++) {
                            for (let j = 0; j < apiResponse[i].RssDocumentContent.length; j++) {
                                this.newsList.push(apiResponse[i].RssDocumentContent[j])
                            }
                        }
                    },
                    GetListOfCatergory: function (apiResponse) {
                        for (let i = 0; i < apiResponse.length; i++) {
                            this.categoryList.push(apiResponse[i].Title);
                        }
                    }
                },
                created: function () {
                    this.GetNews();
                },
            })
    </script>
}

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<div id="app" class="container-fluid">
    <br />
    <div class="row">
        <div class="col-3 ">
        </div>
        <div class="col-6">
            <searchbar inline-template>
                <form class="card card-sm">
                    <div class="card-body row no-gutters align-items-center">
                        <div class="col-auto">
                            <i class="fas fa-search h4 text-body "></i>
                        </div>
                        <!--end of col-->
                        <div class="col">
                            <input class="form-control form-control-lg form-control-borderless" type="search" placeholder="Search topics or keywords">
                        </div>
                        <!--end of col-->
                        <div class="col-auto">
                            <button class="btn btn-lg btn-success" type="submit">Search</button>
                        </div>
                        <!--end of col-->
                    </div>
                </form>
            </searchbar>
        </div>
        <div class="col-3 ">
        </div>
    </div>
    <br />
    <div class="row ">
        <div class="col-2">
            <categorylist v-for="category in categoryList"
                          v-bind:key="category.Name"
                          v-bind:category="category">

            </categorylist>
        </div>
        <div class="col-1 ">
        </div>
        <div class="col-6 align-self-center">
            <contentlist class="col"
                         v-for="obj in newsList"
                         v-bind:item="obj"
                         v-bind:key="obj.$id">

            </contentlist>
        </div>
        <div class="col-3 ">
        </div>
    </div>
    <br />
    <div class="row justify-content-center">
        <emailbar inline-template>
            <div class="col-6 align-self-center"><input><button>Subskrybuj</button></div>
        </emailbar>
    </div>
</div>